<% layout("../layouts/boilerplate") %>

<h2 class="my-3">My Bookings</h2>

<% if (bookings.length === 0) { %>
  <p>You have no bookings yet.</p>
<% } else { %>
  <div class="row">
    <% bookings.forEach(booking => { %>
      <div class="col-md-6">
        <div class="card shadow mb-3">
          <div class="card-header bg-primary text-white">
            Booking Date: <%= booking.Date %>
          </div>
          <div class="card-body">
            <p><b>Seats:</b> <%= booking.Seats.join(", ") %></p>
            <p><b>Price:</b> â‚¹<%= booking.Price %></p>
            <p><b>Pickup:</b> <%= booking.Pickup %></p>
            <p><b>Drop:</b> <%= booking.Drop %></p>

            <h6 class="mt-3">Passenger Details:</h6>
            <table class="table table-sm table-bordered mt-1">
              <thead class="table-light">
                <tr>
                  <th>Name</th>
                  <th>Age</th>
                  <th>Contact</th>
                </tr>
              </thead>
              <tbody>
                <% booking.Passenger.forEach(p => { %>
                  <tr>
                    <td><%= p.name %></td>
                    <td><%= p.age %></td>
                    <td><%= p.contact %></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
           <form method="POST" action="/mybooking/<%= booking._id %>?_method=DELETE">
  <button type="submit" class="btn btn-danger">Cancel Booking</button>
</form>

          </div>
        </div>
      </div>
    <% }) %>
  </div>
<% } %>

